function loadJSData(C,E,A,G){var D=document.getElementsByTagName("head")[0]||document.documentElement;var F=document.createElement("script");F.src=C;F.type="text/javascript";if(E){F.setAttribute("charset",E)}var B=false;F.onload=F.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){B=true;if(typeof(A)=="function"){A(G)}D.removeChild(this)}};D.insertBefore(F,D.firstChild)}function _formatString(B){for(var A=1;A<arguments.length;A++){B=B.replace(new RegExp("\\{"+(A-1)+"\\}","gm"),arguments[A])}return B}if(typeof(console)=="undefined"){window.console={};console.info=function(A){};console.debug=function(){};console.error=function(){}}if(typeof(bsn)=="undefined"){_b=bsn={}}if(typeof(_b.Autosuggest)=="undefined"){_b.Autosuggest={}}_b.jOffset={};(function(A){A.init=function(){var J=document.body,G=document.createElement("div"),D,C,K,E,B=0,I="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";var H={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(var F in H){G.style[F]=H[F]}G.innerHTML=I;J.insertBefore(G,J.firstChild);D=G.firstChild;C=D.firstChild;E=D.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(C.offsetTop!==5);this.doesAddBorderForTableAndCells=(E.offsetTop===5);C.style.position="fixed",C.style.top="20px";this.supportsFixedPosition=(C.offsetTop===20||C.offsetTop===15);C.style.position=C.style.top="";D.style.overflow="hidden",D.style.position="relative";this.subtractsBorderForOverflowNotVisible=(C.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(J.offsetTop!==B);J.removeChild(G);J=G=D=C=K=E=null;A.init=function(){}};A.supportCheck=function(){var B=document.createElement("div");B.style.width=B.style.paddingLeft="1px";document.body.appendChild(B);this.support_boxModel=B.offsetWidth===2;document.body.removeChild(B).style.display="none";B=null;A.supportCheck=function(){}};if("getBoundingClientRect" in document.documentElement){A.supportCheck();A.offset=function(I){var C=typeof(I)=="string"?document.getElementById(I):I;var G=C.getBoundingClientRect(),H=C.ownerDocument,J=H.body,B=H.documentElement,F=B.clientTop||J.clientTop||0,K=B.clientLeft||J.clientLeft||0,D=G.top+(self.pageYOffset||A.support_boxModel&&B.scrollTop||J.scrollTop)-F,E=G.left+(self.pageXOffset||A.support_boxModel&&B.scrollLeft||J.scrollLeft)-K;return{top:D,left:E}}}else{A.init();A.offset=function(K){var C=typeof(K)=="string"?document.getElementById(K):K;console.info(C);var H=C.offsetParent,D=C,J=C.ownerDocument,I,B=J.documentElement,M=J.body,L=J.defaultView,E=L?L.getComputedStyle(C,null):C.currentStyle,G=C.offsetTop,F=C.offsetLeft;while((C=C.parentNode)&&C!==M&&C!==B){if(A.supportsFixedPosition&&E.position==="fixed"){break}I=L?L.getComputedStyle(C,null):C.currentStyle;G-=C.scrollTop;F-=C.scrollLeft;if(C===H){G+=C.offsetTop;F+=C.offsetLeft;if(A.doesNotAddBorder&&!(A.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(C.nodeName))){G+=parseFloat(I.borderTopWidth)||0;F+=parseFloat(I.borderLeftWidth)||0}D=H,H=C.offsetParent}if(A.subtractsBorderForOverflowNotVisible&&I.overflow!=="visible"){G+=parseFloat(I.borderTopWidth)||0;F+=parseFloat(I.borderLeftWidth)||0}E=I}if(E.position==="relative"||E.position==="static"){G+=M.offsetTop;F+=M.offsetLeft}if(A.supportsFixedPosition&&E.position==="fixed"){G+=Math.max(B.scrollTop,M.scrollTop);F+=Math.max(B.scrollLeft,M.scrollLeft)}return{top:G,left:F}}}})(_b.jOffset);_b.AutoSuggest=function(B){if(!document.getElementById){return 0}id=B["autoText"];this.fld=_b.DOM.gE(id);if(!this.fld){return 0}_this=this;this.sTradingCode="";this.sSecuCode="";this.nInpC=0;this.aSug=[];this.iHigh=0;this.isSelected=false;this.oP=B?B:{};var D,C={minchars:1,meth:"get",varname:"input",className:"autosuggest",timeout:2500,delay:300,offsety:-5,shownoresults:false,noresults:"-",maxheight:250};for(D in C){if(typeof(this.oP[D])!=typeof(C[D])){this.oP[D]=C[D]}}var A=this;this.fld.onkeypress=function(E){return A.onKeyPress(E)};this.fld.onkeyup=function(E){return A.onKeyUp(E)};this.fld.onkeydown=function(E){return A.onKeyDown(E)};this.fld.onfocus=function(){if(A.fld.value==A.oP["tooltip"]){A.fld.value=""}};this.fld.onblur=function(){A.resetTimeout();if(A.fld.value==""){A.fld.value=A.oP["tooltip"]}else{setTimeout(function(){if(_this.isSelected==false){_stockSugPointer.setHighlight(1);_stockSugPointer.setHighlightedValue()}},200)}};this.fld.setAttribute("autocomplete","off")};_b.AutoSuggest.prototype.onKeyPress=function(D){var G=(window.event)?window.event.keyCode:D.keyCode;var H=13;var A=9;var C=27;var B=38;var E=40;var F=1;switch(G){case H:this.setHighlightedValue();F=0;break;case C:this.clearSuggestions();break}return F};_b.AutoSuggest.prototype.onKeyDown=function(D){var G=(window.event)?window.event.keyCode:D.keyCode;var H=13;var A=9;var C=27;var B=38;var E=40;var F=1;switch(G){case B:this.changeHighlight(G);F=0;break;case E:this.changeHighlight(G);F=0;break}return F};_b.AutoSuggest.prototype.onKeyUp=function(D){var A=(window.event)?window.event.keyCode:D.keyCode;var E=38;var B=40;var C=1;switch(A){default:this.getSuggestions(this.fld.value)}return C};_b.AutoSuggest.prototype.getSuggestions=function(D){if(D==this.sTradingCode){return 0}_this.isSelected=false;this.sTradingCode=D;if(D.length<this.oP.minchars){this.aSug=[];this.nInpC=D.length;this.resetTimeout();return 0}var B=this.nInpC;this.nInpC=D.length?D.length:0;var A=this;var C=this.sTradingCode;clearTimeout(this.ajID);this.ajID=setTimeout(function(){A.doAjaxRequest(C)},this.oP.delay);return false};function _ntes_stocksearch_callback(D){var B=window._stockSugPointer;B.aSug=[];for(var A=0;A<D.length;A++){var C=D[A];B.aSug.push({"tradingcode":C["tradingcode"],"secuabbr":C["secuabbr"],"chispelling":C["chispelling"],"fintype":C["fintype"],"secucode":C["secucode"],"exchangecode":C["exchangecode"]})}B.idAs="as_"+B.fld.id;B.createList(B.aSug)}function seachStockCode(C,A){var B=window._stockSugPointer;B.aSug=[];$.ajax({url:$ctx+"/seachStockCode.html",data:{autoText:C,token:sessionStorage.user_token},success:function(E){var G=JSON.parse(E).root;for(var D=0;D<Math.min(G.length,A.oP["max"]);D++){var F=G[D];B.aSug.push({"tradingcode":F["tradingcode"],"secuabbr":F["secuabbr"],"chispelling":F["chispelling"],"fintype":F["fintype"],"secucode":F["secucode"],"exchangecode":F["exchangecode"],"secucategory":F["secucategory"]})}B.idAs="as_"+B.fld.id;B.createList(B.aSug)}})}_b.AutoSuggest.prototype.doAjaxRequest=function(A){if(A!=this.fld.value){return false}window._stockSugPointer=this;seachStockCode(encodeURIComponent(A),this)};_b.AutoSuggest.prototype.createList=function(K){var B=this;var F=this.fld.value;_b.DOM.remE(this.idAs);this.killTimeout();if(K.length==0&&!this.oP.shownoresults){return false}var H={"SH":"上海","SZ":"深圳","FND":"基金","BND":"债券","sh":"上海","sz":"深圳","fnd":"基金","bnd":"债券",};var P=_b.DOM.cE("div",{id:this.idAs,className:"sgHead"});var D=[];if(this.oP["tablestyle"]){D.push('<table class="sgText" '+this.oP["tablestyle"]+">")}else{D.push('<table class="sgText">')}D.push("<thead><th>证券代码</th><th>证券名称</th><th>简称</th><th>类型</th><th>secu</th></thead>");D.push("<tbody>");var E=new RegExp(F,"i");var O='<span class="sgRed">'+F.toUpperCase()+"</span>";var G;var M;var N;var I;for(var L=0;L<K.length;L++){G=K[L]["tradingcode"];M=K[L]["secuabbr"];if(M.length>8){M=M.substring(0,8)}N=K[L]["chispelling"];if(N.length>9){N=N.substring(0,9)}I=K[L]["fintype"];secucode=K[L]["secucode"];D.push(_formatString('<tr style="cursor:pointer; z-index:999;" onclick="window._stockSugPointer.setHighlightedValue();" onmouseover="window._stockSugPointer.setHighlight({0});" title="{1}">',L+1,K[L]["secuabbr"]));D.push(_formatString("<td>{0}</td>",G.replace(E,O)));D.push(_formatString("<td>{0}</td>",M.replace(E,O)));D.push(_formatString("<td>{0}</td>",N.replace(E,O)));D.push(_formatString("<td>{0}</td>",H[I]));D.push(_formatString('<td style="display:none">{0}</td>',secucode));D.push("</tr>")}D.push("</tbody>");D.push("</table>");P.innerHTML=D.join("");var A=null;if(this.oP["parentid"]){A=document.getElementById(this.oP["parentid"])}if(!A){A=document.getElementsByTagName("body")[0]}A.appendChild(P);var C=_b.jOffset.offset(this.oP["sugPosition"]||this.fld);var J=this.oP["posAlign"]||"bottom";if(J=="top"){P.style.left=C.left-20+"px";P.style.top=(C.top-P.offsetHeight-10)+"px"}else{P.style.left=C.left-20+"px";P.style.top=(C.top+this.fld.offsetHeight+this.oP.offsety)+"px"}this.iHigh=0};_b.AutoSuggest.prototype.changeHighlight=function(A){var C=_b.DOM.gE(this.idAs).getElementsByTagName("tbody")[0];if(!C){return false}var B;if(A==40){B=this.iHigh+1}else{if(A==38){B=this.iHigh-1}}if(B>C.childNodes.length){B=C.childNodes.length}if(B<1){B=1}this.setHighlight(B)};_b.AutoSuggest.prototype.setHighlight=function(A){var B;if(_b.DOM.gE(this.idAs)!=null&&_b.DOM.gE(this.idAs)!=0){B=_b.DOM.gE(this.idAs).getElementsByTagName("tbody")[0]}if(!B){return false}if(this.iHigh>0){this.clearHighlight()}this.iHigh=Number(A);B.childNodes[this.iHigh-1].className="alter";this.killTimeout()};_b.AutoSuggest.prototype.clearHighlight=function(){var A=_b.DOM.gE(this.idAs).getElementsByTagName("tbody")[0];if(!A){return false}if(this.iHigh>0){A.childNodes[this.iHigh-1].className="";this.iHigh=0}};_b.AutoSuggest.prototype.setHighlightedValue=function(){var A=null;if(this.iHigh){A=this.aSug[this.iHigh-1];if(A==null){this.sTradingCode="";this.sSecuCode="";return}this.sTradingCode=this.fld.value=A["tradingcode"]+" "+A["secuabbr"];this.sSecuCode=A["secucode"];_this.isSelected=true}else{if(this.aSug.length==1){A=this.aSug[0]}}if(A){if(typeof(this.oP.callback)=="function"){this.clearSuggestions();this.oP.callback(A)}}};_b.AutoSuggest.prototype.killTimeout=function(){clearTimeout(this.toID)};_b.AutoSuggest.prototype.resetTimeout=function(){clearTimeout(this.toID);var A=this;this.toID=setTimeout(function(){A.clearSuggestions()},100)};_b.AutoSuggest.prototype.clearSuggestions=function(){this.killTimeout();var C=_b.DOM.gE(this.idAs);var A=this;if(C){var B=new _b.Fader(C,1,0,250,function(){_b.DOM.remE(A.idAs)})}};autoSuggest=_b.AutoSuggest;if(typeof(_b.DOM)=="undefined"){_b.DOM={}}_b.DOM.cE=function(A,G,C,B){var F=document.createElement(A);if(!F){return 0}for(var D in G){F[D]=G[D]}var E=typeof(C);if(E=="string"&&!B){F.appendChild(document.createTextNode(C))}else{if(E=="string"&&B){F.innerHTML=C}else{if(E=="object"){F.appendChild(C)}}}return F};_b.DOM.gE=function(B){var C=typeof(B);if(C=="undefined"){return 0}else{if(C=="string"){var A=document.getElementById(B);if(!A){return 0}else{if(typeof(A.appendChild)!="undefined"){return A}else{return 0}}}else{if(typeof(B.appendChild)!="undefined"){return B}else{return 0}}}};_b.DOM.remE=function(B){var A=this.gE(B);if(!A){return 0}else{if(A.parentNode.removeChild(A)){return true}else{return 0}}};_b.DOM.getPos=function(A){var A=this.gE(A);var B=A;var C=0;if(B.offsetParent){while(B.offsetParent){C+=B.offsetLeft;B=B.offsetParent}}else{if(B.x){C+=B.x}}var B=A;var D=0;if(B.offsetParent){while(B.offsetParent){D+=B.offsetTop;B=B.offsetParent}}else{if(B.y){D+=B.y}}return{x:C,y:D}};if(typeof(_b.Fader)=="undefined"){_b.Fader={}}_b.Fader=function(F,B,C,E,A){if(!F){return 0}this.e=F;this.from=B;this.to=C;this.cb=A;this.nDur=E;this.nInt=50;this.nTime=0;var D=this;this.nID=setInterval(function(){D._fade()},this.nInt)};_b.Fader.prototype._fade=function(){this.nTime+=this.nInt;var C=Math.round(this._tween(this.nTime,this.from,this.to,this.nDur)*100);var B=C/100;if(this.e.filters){try{this.e.filters.item("DXImageTransform.Microsoft.Alpha").opacity=C}catch(A){this.e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+C+")"}}else{this.e.style.opacity=B}if(this.nTime==this.nDur){clearInterval(this.nID);if(this.cb!=undefined){this.cb()}}};_b.Fader.prototype._tween=function(C,B,D,A){return B+((D-B)*(C/A))};